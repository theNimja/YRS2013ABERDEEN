<!DOCTYPE html>
<html>
  <head>

		 <title>Captain Swallows Quantum Pirates</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map-canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?libraries=geometry,key=AIzaSyC9rwi7hwI8oeUF2rdUdVEzRmZZJvAq-MQ&sensor=false">
    </script>

    <script type="text/javascript">
		
		var quantumData = [203, 24, 213, 239, 120, 43, 36, 65, 160, 164, 121, 98, 138, 158, 209, 232, 174, 242, 162, 160, 82, 35, 218, 33, 27, 33, 239, 146, 17, 212, 189, 196, 30, 69, 248, 103, 84, 11, 174, 169, 2, 11, 194, 87, 67, 97, 88, 111, 83, 121];
        var stockdata = [ 53.71,
18.4700000000003,
-93,
-15.3699999999999,
-28.29,
-34.1099999999997,
60.9199999999992,
50.1100000000006,
10.6999999999998,
5.46000000000004,
-33.1599999999999,
-32.4800000000005,
22.9900000000007,
-25.7300000000005,
-7.5,
-3.6899999999996,
62.4299999999994,
15.5799999999999,
-29.7599999999993,
41.1700000000001,
1.52999999999975,
38.4499999999998,
-8.11999999999989,
63.0100000000002,
74.5499999999993,
-46.1499999999996,
191.8,
-74.0699999999997,
-3.84000000000015,
92.3099999999995];
      function initialize() {


	  



          
          var styles = [
 {
      featureType: "road",
      elementType: "all",
      stylers: [
        { visibility:"off" },
        
      ]
    },{
      featureType: "poi",
      elementType: "all",
      stylers: [
        { visibility:"off" },
        
      ]
    },
  ];

  // Create a new StyledMapType object, passing it the array of styles,
  // as well as the name to be displayed on the map type control.
  var styledMap = new google.maps.StyledMapType(styles,
    {name: "Styled Map"});
       var mapOptions = {
          center: new google.maps.LatLng(57.1425,-2.083),
          
          mapTypeControl: false,
          zoom: 10,
          mapTypeId: google.maps.MapTypeId.TERRAIN
        };
        var map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);
	  var port = "anchor.png"
	  var dead="skull.png";
	  var nessie="loch ness monster.png";
	  var noTreasure= "trssur  2.png";
	  var treasure="trssur chest.png";
	  var dragon ="colourful nessy.png"


	var myLatLng = new google.maps.LatLng( 57.1425,-2.083);
      var aberdeen = new google.maps.Marker({
      position: myLatLng,
      map: map,
	  icon:port,
      title:"Aberdeen"
	});
      var myLatLng = new google.maps.LatLng(60.8063888888889,-0.778333333333333);	
      var markerOne = new google.maps.Marker({
      position: myLatLng,
      map: map,
	  icon:treasure,
				  icon:treasure,
      title:"Amsterdam"
  });
    var myLatLng = new google.maps.LatLng( 60.5463888888889,-1.79388888888889);
      var markerTwo = new google.maps.Marker({
      position: myLatLng,
      map: map,
	  con:treasure,
				  icon:treasure,
      title:"Anne"
  });
          var myLatLng = new google.maps.LatLng(60.25,-1.15);
      var markerThree = new google.maps.Marker({
      position: myLatLng,
      map: map,
				  icon:treasure,
      title:"Thistlegorm"
  });
          var myLatLng = new google.maps.LatLng(60.2008333333333,-1.6);
      var markerFour = new google.maps.Marker({
      position: myLatLng,
      map: map,
				  icon:treasure,
      title:"Sweepstake"
  });
          var myLatLng = new google.maps.LatLng(60.1841666666667, -1.51666666666667);
      var markerFive = new google.maps.Marker({
      position: myLatLng,
      map: map,
				  icon:treasure,
      title:"Black Swan"
  });

          var myLatLng = new google.maps.LatLng(60.0338888888889,-1.20194444444444);
      var markerSix = new google.maps.Marker({
      position: myLatLng,
      map: map,
				  icon:treasure,
      title:"General Slocum"
  });

          var myLatLng = new google.maps.LatLng(60.1516666666667, -1.13527777777778);
      var markerSeven = new google.maps.Marker({
      position: myLatLng,
      map: map,
				  icon:treasure,
      title:"SS Sultana"
  });

          var myLatLng = new google.maps.LatLng( 60.0338888888889, -1.20194444444444);
      var markerEight = new google.maps.Marker({
      position: myLatLng,
      map: map,
				  icon:treasure,
      title:"SS Mount-Blanc"
  });

          var myLatLng = new google.maps.LatLng(60.0,-1.41666666666667);
      var markerNine = new google.maps.Marker({
      position: myLatLng,
      map: map,
				  icon:treasure,
      title:"SS Imo"
  });

      var myLatLng = new google.maps.LatLng(59.25,-2.41666666666667);
      var markerTen = new google.maps.Marker({
      position: myLatLng,
      map: map,
				  icon:treasure,
      title:"Griffin"
  });

                var myLatLng = new google.maps.LatLng(59.5508333333333,-1.65);
      var markerEleven = new google.maps.Marker({
      position: myLatLng,
      map: map,
				  icon:treasure,
      title:"Batavia"
  });

      var myLatLng = new google.maps.LatLng(59.25,-2.08333333333333);
      var markerTwelve = new google.maps.Marker({
      position: myLatLng,
      map: map,
				  icon:treasure,
      title:"Sparrow Hawk"
  });

    var myLatLng = new google.maps.LatLng( 58.5258333333333,-5.56305555555556);
      var markerThirteen = new google.maps.Marker({
      position: myLatLng,
      map: map,
				  icon:treasure,
      title:"Eagle"
  });

      var myLatLng = new google.maps.LatLng(60.4177777777778, -2.39222222222222);
      var markerFourteen = new google.maps.Marker({
      position: myLatLng,
      map: map,
				  icon:treasure,
      title:"OddBlob14"
  });

      var myLatLng = new google.maps.LatLng(55.9166666666667,-2);
      var markerFifteen = new google.maps.Marker({
      position: myLatLng,
      map: map,
				  icon:treasure,
      title:"OddBlob15"
  });

	var myLatLng = new google.maps.LatLng(55.9166666666667,-1.93333333333333);
      var markerSixteen = new google.maps.Marker({
      position: myLatLng,
      map: map,
				  icon:treasure,
      title:"OddBlob16"
  });

var myLatLng = new google.maps.LatLng(56.8480555555556,-6.8175);
      var markerSeventeen = new google.maps.Marker({
      position: myLatLng,
      map: map,
				 icon:treasure,
      title:"OddBlob17"
  });

var myLatLng = new google.maps.LatLng( 56.2477777777778,-5.20222222222222);
      var markerEighteen = new google.maps.Marker({
      position: myLatLng,
      map: map,
				 icon:treasure,
      title:"OddBlob18"
  });
var myLatLng = new google.maps.LatLng(57.3,-4.45);
	var lochNessMonster = new google.maps.Marker({
		position: myLatLng,
		map: map,
		icon: nessie,
		title: "Here Be Monsters"	


  });	
var myLatLng = new google.maps.LatLng(56.2852777777778,-3.25);
	var dragon = new google.maps.Marker({
		position: myLatLng,
		map: map,
		icon: dragon,
		title: "Here Be Monsters"	


  });			











 

	var player = "player.png"
    var shipPos =new google.maps.LatLng( 57.1425,-2.083);
    var shipMarker = new google.maps.Marker({
      position: shipPos,
      map: map,
      title:playerName,
	  icon:player
  });

var randObj = Math.floor(Math.random()*31)
var efficiency= stockdata[randObj];			
var allWrecks = new Array();
allWrecks[0]=markerOne;
allWrecks[1]=markerTwo;
allWrecks[2]=markerThree;
allWrecks[3]=markerFour;
allWrecks[4]=markerFive;
allWrecks[5]=markerSix;
allWrecks[6]=markerSeven;
allWrecks[7]=markerEight;
allWrecks[8]=markerNine;
allWrecks[9]=markerTen;
allWrecks[10]=markerEleven;
allWrecks[11]=markerTwelve;
allWrecks[12]=markerThirteen;
allWrecks[13]=markerFourteen;
allWrecks[14]=markerFifteen;
allWrecks[15]=markerSixteen;
allWrecks[16]=markerSeventeen;
allWrecks[17]=markerEighteen;	
var allMonsters=new Array();
allMonsters[0]=lochNessMonster;
allMonsters[1]=dragon;			
var pirates = new Array();
pirates[0]=	 "Jessica Tompkinson";
pirates[1]=	 "Simon Campbell";
pirates[2]=	  "Dr Kate Stone";
pirates[3]=	 "Martine Garland";
pirates[4]=		 "Marcus Hughes";		
pirates[5]=		 "Emma Mulqueeny";	
pirates[6]=		 "Ben Nunney";			
   
 

    map.mapTypes.set('map_style', styledMap);
  map.setMapTypeId('map_style');
      
 google.maps.event.addListener(map, 'click', function(event) {
var newPos =event.latLng;
shipMarker.setPosition(newPos);

	for (var i =0;i<allWrecks.length;i++){


		if (google.maps.geometry.spherical.computeDistanceBetween (newPos, allWrecks[i].getPosition(),6378137)<=500){
			var toGetGold=GetGold();
			gold+=toGetGold;
			alert("You found the treasure of the "+ allWrecks[i].getTitle()+"\nIt had "+toGetGold + " gold in it.\nYou now have "+gold+" gold.");

			allWrecks[i].setIcon(noTreasure);
			allWrecks.splice(i,1);
			}
			}
		for (var i =0;i<allMonsters.length;i++){

		if (google.maps.geometry.spherical.computeDistanceBetween (newPos, allMonsters[i].getPosition(),6378137)<=500){


			alert("You are bieng attacked by a monster!");
			var result = Battle("Monster",2,100,20);
			if (result){
			alert("You beat the monster!");
			allMonsters[i].setIcon(dead);
			allMonsters.splice(i,1);
			}
			else{
			alert("Thou art dead");
			window.location.reload();
			}
			}		



	}		
  if (google.maps.geometry.spherical.computeDistanceBetween (newPos, aberdeen.getPosition(),6378137)<=5000){
		var nextCannon= cannons*cannons*5;
		var service = prompt("You arrive in a port. Which service do you want ? \n1]get a new cannon for " +nextCannon+" gold.\n2]reinforce the ship for 50 gold.\n3]hire crew for 20 gold.You have "+gold+" gold.");
		service=parseInt(service); 
		if (service== 1){
			if (gold >= nextCannon){
			gold-=nextCannon;
			cannons+=1
			alert("You now have "+ cannons+" cannons.");


			}
		else {alert("You dont have enough gold!");}	


			}
		else if(service == 2){
			if (gold>74){
			gold-=75;
			hull+=25;
			alert("You now have reinforced your ship.\nIt has "+hull+" hull.");


			}
		else {

			alert("You dont have enough gold!");
			}	




			}
		else if (service==3){
			if (gold>19){
			gold-=20;
			crew=crew+5;
			alert("You have hired 5 extra men.\nYou now have "+crew+" crew.");


			}
		else {
			alert("You dont have enough gold!");
			}	





			}
		else{
			alert ("You did nothing.");

			}	
			}

			var event =RandomNum(13);
			switch(event){
			case 1:
			var pirate = pirates[RandomNum(pirates.length)];
			alert(pirate+" has found you and is coming for you!")
			var result = Battle(pirate,RandomNum(11),RandomNum(201),RandomNum(36));
			if (result){
			toGetGold=GetGold();
			gold+=toGetGold;
			alert("You beat "+pirate+"!\nYou found "+pirate+"'s stash of "+toGetGold+" gold! \nYou now have "+gold+" gold." );
			}
			else{
			alert("Thou art dead,killed by"+pirate+".");
			window.location.reload();
			}

			
		
			
			//more events
			default:

			}
if (!allMonsters && !allWrecks){


window.location = "victory.html"			
			}
			
			});

function GetGold(){
			var inChest=RandomNum(301);
			return inChest;
			}			

function RandomNum(high){
var done = false;
while (!done) {
	randomObject = Math.floor(Math.random()*50);
	var randomNumber= quantumData[randomObject];
	if (randomNumber < high) {
		done = true;
		return randomNumber;
	} 
}
}
		
function Battle(enemyName,enemyCannons,enemyHull,enemyCrew){
	while (enemyHull>0 && hull>0){			
	var attack=prompt(""+playerName+"          "+enemyName+"\nHull: "+hull+"                 "+enemyHull+"\nCrew: "+crew+"                 "+enemyCrew+"\nCannons: "+cannons+"                "+enemyCannons+"\nWhat will you do? \n1=fire cannons,\n2=board the ship.");
	if (attack==1){
			for (i= 0;i<cannons;i++){enemyHull-=RandomNum(7);}


			for (i= 0;i<enemyCannons;i++){hull-=RandomNum(7);}

			}
	else if(attack==2){for (i= 0;i<crew;i++){enemyHull-=RandomNum(7);}


			for (i= 0;i<enemyCrew;i++){hull-=RandomNum(7);}

			}
	else {alert("what?");}
			}
			if (hull<=0){
			return false;
			}
			else{

			return true;
			}
	}
			
			}




 
   
google.maps.event.addDomListener(window, 'load', initialize);

 

      
    </script>
  </head>

  <body background="pirate.png" bgcolor="#6633ff">
<script>
var playerName= prompt("What is Yar Name?");
var crew =20;
var hull=50;
var cannons=5;			
var gold=0;			
function DisplayStats(){
			
			alert("Name: "+playerName+"\nGold: "+gold+"\nCrew "+crew+"\nCannons: "+cannons+"Hull "+hull);			
			
			}

</script>	
<button onclick="DisplayStats()"> Summary </button>				
    <div id="map-canvas"/>
	
  </body>
</html>